var SharedBackground=function(){"use strict";function t(t){return t&&t.__esModule?t.default:t}function e(t,e){return e={exports:{}},t(e,e.exports),e.exports}function n(t,e){var n=new Image;n.onload=function(){e(this.width,this.height)},n.src=t}function r(t){var e=t.getBoundingClientRect();return{top:e.top,left:e.left,bottom:e.bottom,right:e.right}}function o(t){return{height:t.bottom-t.top,width:t.right-t.left}}var i=e(function(t,e){e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}}),u=t(i),c=e(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),a=e(function(t){var e=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=e)}),f=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},l=function(t,e,n){if(f(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},h=function(t){return"object"==typeof t?null!==t:"function"==typeof t},s=function(t){if(!h(t))throw TypeError(t+" is not an object!");return t},p=function(t){try{return!!t()}catch(t){return!0}},d=!p(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),g=c.document,y=h(g)&&h(g.createElement),v=function(t){return y?g.createElement(t):{}},w=!d&&!p(function(){return 7!=Object.defineProperty(v("div"),"a",{get:function(){return 7}}).a}),m=function(t,e){if(!h(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!h(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!h(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!h(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},b=Object.defineProperty,_=d?Object.defineProperty:function(t,e,n){if(s(t),e=m(e,!0),s(n),w)try{return b(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t},M={f:_},x=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},P=d?function(t,e,n){return M.f(t,e,x(1,n))}:function(t,e,n){return t[e]=n,t},k=function(t,e,n){var r,o,i,u=t&k.F,f=t&k.G,h=t&k.S,s=t&k.P,p=t&k.B,d=t&k.W,g=f?a:a[e]||(a[e]={}),y=g.prototype,v=f?c:h?c[e]:(c[e]||{}).prototype;f&&(n=e);for(r in n)(o=!u&&v&&void 0!==v[r])&&r in g||(i=o?v[r]:n[r],g[r]=f&&"function"!=typeof v[r]?n[r]:p&&o?l(i,c):d&&v[r]==i?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(i):s&&"function"==typeof i?l(Function.call,i):i,s&&((g.virtual||(g.virtual={}))[r]=i,t&k.R&&y&&!y[r]&&P(y,r,i)))};k.F=1,k.G=2,k.S=4,k.P=8,k.B=16,k.W=32,k.U=64,k.R=128;var E=k;E(E.S+E.F*!d,"Object",{defineProperty:M.f});var j=a.Object,S=function(t,e,n){return j.defineProperty(t,e,n)},B=e(function(t){t.exports={default:S,__esModule:!0}}),O=e(function(t,e){e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(B);e.default=function(){function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,n.default)(t,o.key,o)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()}),R=t(O);return function(){function t(e,r){var o=this;u(this,t),this.container=e,n(r,function(t,e){o.image={url:r,width:t,height:e},o.getPanels().forEach(function(t){t.style.backgroundImage="url("+o.image.url+")"}),o.render(),window.addEventListener("resize",function(){o.render()})})}return R(t,[{key:"getPanels",value:function(){return Array.prototype.slice.call(this.container.children)}},{key:"getBoundingRect",value:function(){return this.getPanels().reduce(function(t,e){var n=r(e);return t?{top:Math.min(t.top,n.top),left:Math.min(t.left,n.left),bottom:Math.max(t.bottom,n.bottom),right:Math.max(t.right,n.right)}:n},null)}},{key:"computeImageSize",value:function(){var t=o(this.getBoundingRect()),e=this.image.width/this.image.height,n=t.height,r=n*e;return r<t.width&&(n*=t.width/r,r=n*e),{width:r,height:n}}},{key:"render",value:function(){var t=this.computeImageSize(),e=this.getBoundingRect(),n=o(e),i=Math.max(0,t.width-n.width)/2,u=Math.max(0,t.height-n.height)/2;this.getPanels().forEach(function(n){var o=r(n);n.style.backgroundSize=Math.round(t.width)+"px "+Math.round(t.height)+"px",n.style.backgroundPositionX=e.left-o.left-i+"px",n.style.backgroundPositionY=e.top-o.top-u+"px"})}}]),t}()}();
